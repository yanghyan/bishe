window.Widget=function(){function n(n){i(n)}var t,o=[],e=[],i=function(n){t.$el=$(t.el),c(),t.init&&$.isFunction(t.init)&&t.init(n),r()},c=function(){t.$dom={};for(var n,o,e=t.$el.html()||"",i=e.match(/data-node="([^"]*)"/gim)||[],c=i.length-1;c>=0;c--)n=i[c],o=n.split("=")[1].replace(/"/g,""),t.$dom[o]=t.$el.find("["+n+"]")},r=function(){var n,o,e,i,c=t.events,r=t.channels,a=/^(\S+)\s*(.*)$/;c&&c instanceof Object&&$.each(c,function(e,c){return $.isFunction(c)||(c=t[c]),c?(i=e.match(a),n=i[1],o=i[2],void u(n,o,c)):!0}),r&&r instanceof Object&&$.each(r,function(o,c){return $.isFunction(c)||(c=t[c]),c?(i=o.match(a),e=i[1],n=i[2],void f(e,n,c)):!0}),listener.once("common.page","pagearrived",$.proxy(d,t))},u=function(n,e,i){var c=t.el||"body";e?$(c).on(n,e,$.proxy(i,t)):$(c).on(n,$.proxy(i,t)),o.push([n,e,i])},f=function(n,o,i){listener.on(n,o,$.proxy(i,t)),e.push([n,o,i])},a=function(n,o,e){var i=t.el||"body";o?$(i).off(n,o,e):$(i).off(n,e)},s=function(n,t,o){listener.off(n,t,o)},d=function(){t.destroy&&$.isFunction(t.destroy)&&(t.destroy(),t.destroy=null),$.each(o,function(n,t){a(t[0],t[1],t[2])}),$.each(e,function(n,t){s(t[0],t[1],t[2])}),o=[],e=[],t.el=void 0};return n.extend=function(n){var o=this,e=function(){return t=this,o.apply(this,arguments)},i=function(){this.constructor=e};return i.prototype=o.prototype,e.prototype=new i,i=null,$.extend(e.prototype,n),e.createWidget=function(n){new e(n)},e},n}();